---
sidebar_position: 6
---

# 列挙型 (enum) とフラグ

汎用的に使われている列挙型とフラグ。

## 攻撃回数 {#number-of-attacks}

攻撃回数のenum。悪魔の通常攻撃回数やスキルの効果範囲などで利用される。

各攻撃回数は累積分布関数 $P(X \leq x_i)$ が取りうる値で表現され、 $P(X = n)$ は $n$ 回攻撃する確率を表す。
攻撃回数選択時には乱数 $Y \sim \mathcal{U}\{0, 255\}$ が生成され、 $Y \leq P(X \leq x_i)$ を満たす最小の $i$ が攻撃回数として選択される。

`0x07CB0F` から9byteずつ、 `0x0F` を除く計15パターン登録されている。

| ID     | 回数  | 0回          | 1回           | 2回           | 3回           | 4回           | 5回           | 6回           | 7回           | 8回           |
|--------|-------|--------------|---------------|---------------|---------------|---------------|---------------|---------------|---------------|---------------|
| `0x00` | 1回   | `0x00` (0%)  | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x01` | 2回   | `0x00` (0%)  | `0x00` (0%)   | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x02` | 0-1回 | `0x9F` (62%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x03` | 0-1回 | `0x1F` (12%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x04` | 1-2回 | `0x00` (0%)  | `0x7F` (50%)  | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x05` | 2-3回 | `0x00` (0%)  | `0x00` (0%)   | `0x7F` (50%)  | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x06` | 0-2回 | `0x1F` (12%) | `0xBF` (75%)  | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x07` | 1-3回 | `0x00` (0%)  | `0x3F` (25%)  | `0xBF` (75%)  | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x08` | 2-4回 | `0x00` (0%)  | `0x00` (0%)   | `0x3F` (25%)  | `0xBF` (75%)  | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x09` | 3-5回 | `0x00` (0%)  | `0x00` (0%)   | `0x00` (0%)   | `0x3F` (25%)  | `0xBF` (75%)  | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x0A` | 3-6回 | `0x00` (0%)  | `0x00` (0%)   | `0x00` (0%)   | `0x3F` (25%)  | `0x7F` (50%)  | `0xBF` (75%)  | `0xFF` (100%) | `0xFF` (100%) | `0xFF` (100%) |
| `0x0B` | 5-8回 | `0x00` (0%)  | `0x00` (0%)   | `0x00` (0%)   | `0x00` (0%)   | `0x00` (0%)   | `0x3F` (25%)  | `0x7F` (50%)  | `0xBF` (75%)  | `0xFF` (100%) |
| `0x0C` | 2-8回 | `0x00` (0%)  | `0x00` (0%)   | `0x1F` (12%)  | `0x3F` (25%)  | `0x5F` (37%)  | `0x8F` (56%)  | `0xBF` (75%)  | `0xDF` (87%)  | `0xFF` (100%) |
| `0x0D` | 1-8回 | `0x00` (0%)  | `0x0F` (6%)   | `0x2F` (18%)  | `0x4F` (31%)  | `0x7F` (50%)  | `0xAF` (69%)  | `0xCF` (81%)  | `0xEF` (94%)  | `0xFF` (100%) |
| `0x0E` | 0-8回 | `0x1F` (12%) | `0x3F` (25%)  | `0x5F` (37%)  | `0x7F` (50%)  | `0x9F` (62%)  | `0xBF` (75%)  | `0xDF` (87%)  | `0xEF` (94%)  | `0xFF` (100%) |
| `0x0F` | 全員  | N/A          | N/A           | N/A           | N/A           | N/A           | N/A           | N/A           | N/A           | N/A           |

確率分布に直すと以下のようになる。

| ID     | 回数  | 0回 | 1回  | 2回  | 3回 | 4回 | 5回 | 6回 | 7回 | 8回 |
|--------|-------|-----|------|------|-----|-----|-----|-----|-----|-----|
| `0x00` | 1回   | 0%  | 100% | 0%   | 0%  | 0%  | 0%  | 0%  | 0%  | 0%  |
| `0x01` | 2回   | 0%  | 0%   | 100% | 0%  | 0%  | 0%  | 0%  | 0%  | 0%  |
| `0x02` | 0-1回 | 62% | 38%  | 0%   | 0%  | 0%  | 0%  | 0%  | 0%  | 0%  |
| `0x03` | 0-1回 | 12% | 88%  | 0%   | 0%  | 0%  | 0%  | 0%  | 0%  | 0%  |
| `0x04` | 1-2回 | 0%  | 50%  | 50%  | 0%  | 0%  | 0%  | 0%  | 0%  | 0%  |
| `0x05` | 2-3回 | 0%  | 0%   | 50%  | 50% | 0%  | 0%  | 0%  | 0%  | 0%  |
| `0x06` | 0-2回 | 12% | 63%  | 25%  | 0%  | 0%  | 0%  | 0%  | 0%  | 0%  |
| `0x07` | 1-3回 | 0%  | 25%  | 50%  | 25% | 0%  | 0%  | 0%  | 0%  | 0%  |
| `0x08` | 2-4回 | 0%  | 0%   | 25%  | 50% | 25% | 0%  | 0%  | 0%  | 0%  |
| `0x09` | 3-5回 | 0%  | 0%   | 0%   | 25% | 50% | 25% | 0%  | 0%  | 0%  |
| `0x0A` | 3-6回 | 0%  | 0%   | 0%   | 25% | 25% | 25% | 25% | 0%  | 0%  |
| `0x0B` | 5-8回 | 0%  | 0%   | 0%   | 0%  | 0%  | 25% | 25% | 25% | 25% |
| `0x0C` | 2-8回 | 0%  | 0%   | 12%  | 13% | 12% | 19% | 19% | 12% | 13% |
| `0x0D` | 1-8回 | 0%  | 6%   | 12%  | 13% | 19% | 19% | 12% | 13% | 6%  |
| `0x0E` | 0-8回 | 12% | 13%  | 12%  | 13% | 12% | 13% | 12% | 7%  | 6%  |
| `0x0F` | 全員  | N/A | N/A  | N/A  | N/A | N/A | N/A | N/A | N/A | N/A |

## 状態異常 {#status-condition}

軽い状態異常のフラグ。CLOSE以外はターン経過により自然回復する。

| フラグ | 状態異常 |
|--------|----------|
| `0x00` | なし     |
| `0x01` | HAPPY    |
| `0x02` | PANIC    |
| `0x04` | CLOSE    |
| `0x08` | SHOCK    |
| `0x10` | FREEZE   |
| `0x20` | BIND     |
| `0x40` | SLEEP    |
| `0x80` | CHARM    |

重い状態異常のフラグ。

| フラグ | 状態異常 |
|--------|----------|
| `0x00` | なし     |
| `0x01` | CURSE    |
| `0x02` | FROG     |
| `0x04` | FLY      |
| `0x08` | POISON   |
| `0x10` | PALAYZE  |
| `0x20` | STONE    |
| `0x40` | DYING    |
| `0x80` | DEAD     |
