# smt1-note

真・女神転生 (Shin Megami Tensei) の日本語版SFCについてのデータをまとめています。

## 文字

文字コード一覧。未使用の場合は `0xFF` が割り当てられる。

|        |  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |  8  |  9  |  A  |  B  |  C  |  D  |  E  |  F  |
|--------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| `0x00` | N/A |  ０ |  １ |  ２ |  ３ |  ４ |  ５ |  ６ |  ７ |  ８ |  ９ |  Ａ |  Ｂ |  Ｃ |  Ｄ |  Ｅ |
| `0x10` |  Ｆ |  Ｇ |  Ｈ |  Ｉ |  Ｊ |  Ｋ |  Ｌ |  Ｍ |  Ｎ |  Ｏ |  Ｐ |  Ｑ |  Ｒ |  Ｓ |  Ｔ |  Ｕ |
| `0x20` |  Ｖ |  Ｗ |  Ｘ |  Ｙ |  Ｚ |  あ |  い |  う |  え |  お |  か |  き |  く |  け |  こ |  さ |
| `0x30` |  し |  す |  せ |  そ |  た |  ち |  つ |  て |  と |  な |  に |  ぬ |  ね |  の |  は |  ひ |
| `0x40` |  ふ |  へ |  ほ |  ま |  み |  む |  め |  も |  や |  ゆ |  よ |  ら |  り |  る |  れ |  ろ |
| `0x50` |  わ |  を |  ん |  ぁ |  ぉ |  ゃ |  ゅ |  ょ |  っ |  ぅ |  ー |  ￥ |  ♄  |  ア |  イ |  ウ |
| `0x60` |  エ |  オ |  カ |  キ |  ク |  ケ |  コ |  サ |  シ |  ス |  セ |  ソ |  タ |  チ |  ツ |  テ |
| `0x70` |  ト |  ナ |  ニ |  ヌ |  ネ |  ノ |  ハ |  ヒ |  フ |  ヘ |  ホ |  マ |  ミ |  ム |  メ |  モ |
| `0x80` |  ヤ |  ユ |  ヨ |  ラ |  リ |  ル |  レ |  ロ |  ワ |  ヲ |  ン |  ァ |  ィ |  ェ |  ォ |  ャ |
| `0x90` |  ュ |  ョ |  ッ |  ・ |  ！ |  ？ |  ＆ |  ＞ |  ／ |  ＇ |  ： |  ． |  が |  ぎ |  ぐ |  げ |
| `0xA0` |  ご |  ざ |  じ |  ず |  ぜ |  ぞ |  だ |  ぢ |  づ |  で |  ど |  ば |  び |  ぶ |  べ |  ぼ |
| `0xB0` |  ぱ |  ぴ |  ぷ |  ぺ |  ぽ |  ガ |  ギ |  グ |  ゲ |  ゴ |  ザ |  ジ |  ズ |  ゼ |  ゾ |  ダ |
| `0xC0` |  ヂ |  ヅ |  デ |  ド |  バ |  ビ |  ブ |  べ |  ボ |  パ |  ピ |  プ |  ペ |  ポ |  ヴ | 空白|

## 制御文字

特殊な機能を持つ文字一覧。

| 文字コード | 使用バイト数 | アドレス   | 説明                                                             |
|------------|--------------|------------|------------------------------------------------------------------|
| `0xD0`     | TBU          | `0x000000` | TBU                                                              |
| `0xD1`     | TBU          | `0x000000` | TBU                                                              |
| `0xD2`     | 3            | `0x038653` | 分岐。フラグが立っている場合はジャンプし、立っていない場合は継続 |
| `0xD3`     | 2            | `0x038669` | ループ                                                           |
| `0xD4`     | 2            | `0x038674` | ウィンドウの表示行数を指定したウィンドウクリア                   |
| `0xD5`     | TBU          | `0x000000` | TBU                                                              |
| `0xD6`     | 5?           | `0x000000` | TBU                                                              |
| `0xD7`     | TBU          | `0x000000` | TBU                                                              |
| `0xD8`     | TBU          | `0x000000` | TBU                                                              |
| `0xD9`     | TBU          | `0x000000` | TBU                                                              |
| `0xDA`     | TBU          | `0x000000` | TBU                                                              |
| `0xDB`     | TBU          | `0x000000` | TBU                                                              |
| `0xDC`     | TBU          | `0x000000` | TBU                                                              |
| `0xDD`     | TBU          | `0x000000` | TBU                                                              |
| `0xDE`     | TBU          | `0x000000` | TBU                                                              |
| `0xDF`     | 1            | `0x0389BE` | ウェイト                                                         |
| `0xE0`     | TBU          | `0x000000` | TBU                                                              |
| `0xE1`     | 2            | `0x0389D3` | アイテムIDの読み込み                                             |
| `0xE2`     | TBU          | `0x000000` | TBU                                                              |
| `0xE3`     | TBU          | `0x000000` | TBU                                                              |
| `0xE4`     | TBU          | `0x000000` | TBU                                                              |
| `0xE5`     | TBU          | `0x000000` | TBU                                                              |
| `0xE6`     | TBU          | `0x000000` | TBU                                                              |
| `0xE7`     | TBU          | `0x000000` | TBU                                                              |
| `0xE8`     | TBU          | `0x000000` | TBU                                                              |
| `0xE9`     | TBU          | `0x000000` | TBU                                                              |
| `0xEA`     | TBU          | `0x000000` | TBU                                                              |
| `0xEB`     | TBU          | `0x000000` | TBU                                                              |
| `0xEC`     | 1            | `0x000000` | プレースホルダ (名前)                                            |
| `0xED`     | 1            | `0x000000` | プレースホルダ (名前)                                            |
| `0xEE`     | 1            | `0x000000` | プレースホルダ (ロウヒーロー)                                    |
| `0xEF`     | 1            | `0x000000` | プレースホルダ (カオスヒーロー)                                  |
| `0xF0`     | 1            | `0x000000` | プレースホルダ (ザ・ヒーロー)                                    |
| `0xF1`     | 1            | `0x000000` | プレースホルダ (名前)                                            |
| `0xF2`     | 2            | `0x000000` | プレースホルダ (定型文)                                          |
| `0xF3`     | 1            | `0x000000` | プレースホルダ (アイテム名)                                      |
| `0xF4`     | 1            | `0x000000` | プレースホルダ (魔法名)                                          |
| `0xF5`     | 1            | `0x000000` | プレースホルダ (名前)                                            |
| `0xF6`     | 1            | `0x000000` | プレースホルダ (名前)                                            |
| `0xF7`     | TBU          | `0x000000` | TBU                                                              |
| `0xF8`     | 2            | `0x0392E1` | はい/いいえ。はいの場合はジャンプし、いいえの場合は継続          |
| `0xF9`     | 1            | `0x000000` | キー待ちなし改行                                                 |
| `0xFA`     | 1            | `0x0393FF` | ウィンドウクリア                                                 |
| `0xFB`     | 1            | `0x000000` | プレースホルダ                                                   |
| `0xFC`     | 1            | `0x000000` | キー待ちあり改行                                                 |
| `0xFD`     | TBU          | `0x000000` | TBU                                                              |
| `0xFE`     | 3            | `0x000000` | サブルーチンの実行？                                             |
| `0xFF`     | 1            | `0x000000` | 未使用/終端文字                                                  |

## 定型文

容量圧縮のために頻出単語・文章があらかじめ定義されており、テキストデータの方では制御文字(ないしエスケープシーケンス)を使ってこれらの定型文を参照していることがある。
再帰的な定型文の評価や制御文字による特殊な処理の呼び出しも可能なので、実質的にはevalやサブルーチンに近い。

- かっこ書きしているものは特殊文字または注釈です。 e.g. `(制御文字)` `(TBU)` など。
- 一部の制御文字は置換して表示しています。 `⏎` はキーウェイトなしの改行、`▼` はキーウェイトありの改行、 `¶` はウィンドウクリアです。
- 末尾の `0xFF` は除いています。

| 番号   | アドレス   | 文章                                                                                                                                                                                                                                                                                                                                                                                              |
|--------|------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `0x00` | `0x08801A` | しょうじょ                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x01` | `0x088020` | しょうねん                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x02` | `0x088026` | われわれ                                                                                                                                                                                                                                                                                                                                                                                          |
| `0x03` | `0x08802B` | あなたがた                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x04` | `0x088031` | おまえたち                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x05` | `0x088037` | マグネタイト                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x06` | `0x08803E` | じぶんの　へや                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x07` | `0x088046` | メッセージ                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x08` | `0x08804C` | プログラム                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x09` | `0x088052` | コンピュータ                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x0A` | `0x088059` | イヌの　パスカル                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x0B` | `0x088062` | ・・・(制御文字0xFE071E)                                                                                                                                                                                                                                                                                                                                                                          |
| `0x0C` | `0x088069` | バウ！ワウ！                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x0D` | `0x088070` | ありがとう                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x0E` | `0x088076` | たちいりきんし                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x0F` | `0x08807E` | かいげんしれいぶ                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x10` | `0x088087` | きょうりょく                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x11` | `0x08808E` | となりのいしゃ                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x12` | `0x088096` | と　はなしますか？                                                                                                                                                                                                                                                                                                                                                                                |
| `0x13` | `0x0880A0` | アクマしょうかん                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x14` | `0x0880A9` | かいぞうしゅじゅつ                                                                                                                                                                                                                                                                                                                                                                                |
| `0x15` | `0x0880B3` | レジスタンス                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x16` | `0x0880BA` | リーダー                                                                                                                                                                                                                                                                                                                                                                                          |
| `0x17` | `0x0880BF` | クーデター                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x18` | `0x0880C5` | シンジュク                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x19` | `0x0880CB` | イチガヤ                                                                                                                                                                                                                                                                                                                                                                                          |
| `0x1A` | `0x0880D0` | イノガシラ　こうえん                                                                                                                                                                                                                                                                                                                                                                              |
| `0x1B` | `0x0880DB` | アメリカ                                                                                                                                                                                                                                                                                                                                                                                          |
| `0x1C` | `0x0880E0` | トウキョウ                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x1D` | `0x0880E6` | ウフフフフ                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x1E` | `0x0880EC` | さつじんようぎ                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x1F` | `0x0880F4` | とちょうまえひろば                                                                                                                                                                                                                                                                                                                                                                                |
| `0x20` | `0x0880FE` | しれいかん                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x21` | `0x088104` | せんねんおうこく                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x22` | `0x08810D` | ジエイタイ                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x23` | `0x088113` | ルシファーさま                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x24` | `0x08811B` | Ｉ．Ｃ．Ｂ．Ｍ．                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x25` | `0x088124` | ＞ダウンロードします(制御文字0xDF)(制御文字0xDF)(制御文字0xDF)                                                                                                                                                                                                                                                                                                                                    |
| `0x26` | `0x088132` | ＞パラメーターに　１８ポイントを⏎ふりわけてください                                                                                                                                                                                                                                                                                                                                               |
| `0x27` | `0x08814D` | これで　いいですか？                                                                                                                                                                                                                                                                                                                                                                              |
| `0x28` | `0x088158` | ちからを　かしてくれるか                                                                                                                                                                                                                                                                                                                                                                          |
| `0x29` | `0x088165` | たすけられませんでした                                                                                                                                                                                                                                                                                                                                                                            |
| `0x2A` | `0x088171` | かべに　なにか　かいてある                                                                                                                                                                                                                                                                                                                                                                        |
| `0x2B` | `0x08817F` | とおすわけには　いかないな                                                                                                                                                                                                                                                                                                                                                                        |
| `0x2C` | `0x08818D` | だれもいない                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x2D` | `0x088194` | てにいれた                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x2E` | `0x08819A` | ＞なにを　しますか？                                                                                                                                                                                                                                                                                                                                                                              |
| `0x2F` | `0x0881A5` | ナカマに　くわわった                                                                                                                                                                                                                                                                                                                                                                              |
| `0x30` | `0x0881B0` | かいげんれい                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x31` | `0x0881B7` | ありがとうございました                                                                                                                                                                                                                                                                                                                                                                            |
| `0x32` | `0x0881C3` | いらっしゃいませ                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x33` | `0x0881CC` | メシアきょう                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x34` | `0x0881D3` | ガイアきょう                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x35` | `0x0881DA` | びょういん                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x36` | `0x0881E0` | コンゴウシンカイ                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x37` | `0x0881E9` | エンノオヅノ                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x38` | `0x0881F0` | なにか　おちている                                                                                                                                                                                                                                                                                                                                                                                |
| `0x39` | `0x0881FA` | ＞(定型文0x38)▼(制御文字0xDC0A0000FA0201FE)　を　(定型文0x2D)▼                                                                                                                                                                                                                                                                                                                                    |
| `0x3A` | N/A        | (TBU)                                                                                                                                                                                                                                                                                                                                                                                             |
| `0x3B` | N/A        | (TBU)                                                                                                                                                                                                                                                                                                                                                                                             |
| `0x3C` | N/A        | (TBU)                                                                                                                                                                                                                                                                                                                                                                                             |
| `0x3D` | N/A        | (TBU)                                                                                                                                                                                                                                                                                                                                                                                             |
| `0x3E` | N/A        | (TBU)                                                                                                                                                                                                                                                                                                                                                                                             |
| `0x3F` | N/A        | (TBU)                                                                                                                                                                                                                                                                                                                                                                                             |
| `0x40` | N/A        | (TBU)                                                                                                                                                                                                                                                                                                                                                                                             |
| `0x41` | `0x08828D` | こんごとも　よろしく(定型文0x0B)                                                                                                                                                                                                                                                                                                                                                                  |
| `0x42` | `0x08829A` | しせつけいさつ                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x43` | `0x0882A2` | では　ナカマを　へらして                                                                                                                                                                                                                                                                                                                                                                          |
| `0x44` | `0x0882AF` | こうやって　サケがのめる                                                                                                                                                                                                                                                                                                                                                                          |
| `0x45` | `0x0882BC` | おんなのこえ：⏎(定型文0x0B)たすけて(定型文0x0B)⏎(プレースホルダ0xF0)(定型文0x0B)　たすけて(定型文0x0B)▼¶＞(プレースホルダ0xF0)の　いしきのなかに⏎おんなのこえが　ひびいた(定型文0x0B)▼                                                                                                                                                                                                            |
| `0x46` | `0x0882F5` | サイコダイバー                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x47` | `0x0882FD` | は　おらぬようだな                                                                                                                                                                                                                                                                                                                                                                                |
| `0x48` | `0x088307` | みな　げんきなようだな                                                                                                                                                                                                                                                                                                                                                                            |
| `0x49` | `0x088313` | みな　いきているようだな                                                                                                                                                                                                                                                                                                                                                                          |
| `0x4A` | `0x088320` | おねがいします                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x4B` | `0x088328` | とびらは　あかない                                                                                                                                                                                                                                                                                                                                                                                |
| `0x4C` | `0x088332` | ロッポンギ                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x51` | `0x088338` | コントロール・システム                                                                                                                                                                                                                                                                                                                                                                            |
| `0x4E` | `0x088344` | ほうせきを　もってない                                                                                                                                                                                                                                                                                                                                                                            |
| `0x4F` | `0x088350` | どの　ほうせきを　こうかんするの？                                                                                                                                                                                                                                                                                                                                                                |
| `0x50` | `0x088362` | あかはくしゃく                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x51` | `0x08836A` | くろだんしゃく                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x52` | `0x088372` | あかおじさん                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x53` | `0x088379` | くろおじさん                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x54` | `0x088380` | (定型文0x0B)(定型文0x0B)(定型文0x0B)(定型文0x0B)(定型文0x0B)⏎できた(制御文字0xDF)(制御文字0xDF)(制御文字0xDF)　これで　ストックできる⏎ナカマが２たい　ふえた⏎わたしの　(定型文0x13)(定型文0x08)も                                                                                                                                                                                                 |
| `0x55` | `0x0883B5` | つかいこなせる                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x56` | `0x0883BD` | エネルギー                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x57` | `0x0883C3` | ＤＡＴＥ：１９９Ｘー１０ーＸ                                                                                                                                                                                                                                                                                                                                                                      |
| `0x58` | `0x0883D2` | ＮＡＭＥ：ＳＴＥＶＥＮ                                                                                                                                                                                                                                                                                                                                                                            |
| `0x59` | `0x0883DE` | オートマッピング                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x5A` | `0x0883E7` | セーブ　かんりょう　しました▼                                                                                                                                                                                                                                                                                                                                                                     |
| `0x5B` | `0x0883F7` | ゲームを　つづけますか？                                                                                                                                                                                                                                                                                                                                                                          |
| `0x5C` | `0x088404` | カテドラル                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x5D` | `0x08840A` | ¶は(制御文字0xDF)や(制御文字0xDF)く(制御文字0xDF)・(制御文字0xDF)・(制御文字0xDF)・(制御文字0xDF)で(制御文字0xDF)ん(制御文字0xDF)げ(制御文字0xDF)ん(制御文字0xDF)を(制御文字0xDF)・(制御文字0xDF)き(制御文字0xDF)っ(制御文字0xDF)て(制御文字0xDF)・(制御文字0xDF)・(制御文字0xDF)・(制御文字0xDF)く(制御文字0xDF)れ(制御文字0xDF)・(制御文字0xDF)・(制御文字0xDF)・(制御文字0xDF)(制御文字0xD35E) |
| `0x5E` | N/A        | N/A                                                                                                                                                                                                                                                                                                                                                                                               |
| `0x5F` | `0x08843B` | なにに　いたしましょう                                                                                                                                                                                                                                                                                                                                                                            |
| `0x60` | `0x088447` | すみませんが　おかねが　たりません                                                                                                                                                                                                                                                                                                                                                                |
| `0x61` | `0x088459` | おつれさまは　                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x62` | `0x088461` | デスティニーランド                                                                                                                                                                                                                                                                                                                                                                                |
| `0x63` | `0x08846B` | ほうのかみ                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x64` | `0x088471` | グワッ　グワッ                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x65` | `0x088479` | オザワさま                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x66` | `0x08847F` | ロウヒーロー                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x67` | `0x088486` | カオスヒーロー                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x68` | `0x08848E` | なかに　はいりますか？                                                                                                                                                                                                                                                                                                                                                                            |
| `0x69` | `0x08849A` | とびらは　とざされている                                                                                                                                                                                                                                                                                                                                                                          |
| `0x6A` | `0x0884A7` | カオスヒロイン                                                                                                                                                                                                                                                                                                                                                                                    |
| `0x6B` | `0x0884AF` | ハッハッハッハッ                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x6C` | `0x0884B8` | ルイ・サイファー                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x6D` | `0x0884C1` | アクマつかい                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x6E` | `0x0884C8` | なにも　うつっていない                                                                                                                                                                                                                                                                                                                                                                            |
| `0x6F` | `0x0884D4` | かみの　ごかごが　あらんことを(定型文0x0B)                                                                                                                                                                                                                                                                                                                                                        |
| `0x70` | `0x0884E6` | ここは　(定型文0x5C)の　ちゅうしんぶ　らしい                                                                                                                                                                                                                                                                                                                                                      |
| `0x71` | `0x0884F9` | せいしんの　なか                                                                                                                                                                                                                                                                                                                                                                                  |
| `0x72` | `0x088502` | みつけたが　もちきれなかった                                                                                                                                                                                                                                                                                                                                                                      |
| `0x73` | `0x088511` | どうぐー(制御文字0xDF)(制御文字0xDF)(制御文字0xDF)　どうぐー(制御文字0xDF)(制御文字0xDF)(制御文字0xDF)　べんりな　どうぐー                                                                                                                                                                                                                                                                        |
| `0x74` | `0x08852B` | (制御文字0xD600B67048)＞たからばこが　ある▼¶あけますか？                                                                                                                                                                                                                                                                                                                                          |
| `0x75` | `0x088543` | (制御文字0xD403)(プレースホルダ0xF1)は⏎たからばこを　あきらめた                                                                                                                                                                                                                                                                                                                                   |
| `0x76` | `0x088555` | (制御文字0xD403)なかは　からっぽだった                                                                                                                                                                                                                                                                                                                                                            |
| `0x77` | `0x088563` | ＞(プレースホルダ0xF5)の　ぞうが　ある▼                                                                                                                                                                                                                                                                                                                                                           |
| `0x78` | N/A        | (TBU)                                                                                                                                                                                                                                                                                                                                                                                             |
| `0x79` | `0x08857A` | では　もちものを　へらしてこい                                                                                                                                                                                                                                                                                                                                                                    |
| `0x7A` | `0x08858A` | ホーッホッホッホッホ                                                                                                                                                                                                                                                                                                                                                                              |
| `0x7B` | `0x088595` | ＞まだ　せっきょうを　ききますか？                                                                                                                                                                                                                                                                                                                                                                |
| `0x7C` | N/A        | (TBU)                                                                                                                                                                                                                                                                                                                                                                                             |
| `0x7D` | N/A        | (TBU)                                                                                                                                                                                                                                                                                                                                                                                             |
| `0x7E` | `0x08865C` | を　ナカマに　しますか？                                                                                                                                                                                                                                                                                                                                                                          |
| `0x7F` | `0x088669` | とつぜん　(プレースホルダ0xF3)が　かがやきはじめた⏎ひかりが　すいめんを　てらすと⏎                                                                                                                                                                                                                                                                                                                |
| `0x80` | `0x08868B` | (プレースホルダ0xF3)が　うかびあがってきた▼                                                                                                                                                                                                                                                                                                                                                       |
| `0x81` | `0x088699` | ＞(プレースホルダ0xF3)が　かがやき⏎ひかりが　とびらを　てらした▼(制御文字0xFE1C03)                                                                                                                                                                                                                                                                                                                |
| `0x82` | `0x0886B5` | ¶ははのこえ：⏎(プレースホルダ0xF0)　いつまで　ねてるの？⏎やすみだからって　ねぼうは　ダメよ▼¶はやく　おきてらっしゃい▼                                                                                                                                                                                                                                                                            |
| `0x83` | `0x0886EB` | くるまいすのおとこ                                                                                                                                                                                                                                                                                                                                                                                |
| `0x84` | `0x0886F5` | ＞てつごうしは　ビクともしない▼                                                                                                                                                                                                                                                                                                                                                                   |
| `0x85` | `0x088706` | やくにたって　いるかね？                                                                                                                                                                                                                                                                                                                                                                          |
| `0x86` | `0x088713` | マニュアル                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x87` | `0x088719` | セラフてんし                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x88` | `0x088720` | では　もっと　レべルを　あげてこい▼                                                                                                                                                                                                                                                                                                                                                               |
| `0x89` | `0x088733` | そとに　でますか？                                                                                                                                                                                                                                                                                                                                                                                |
| `0x8a` | `0x08873D` | タイジョウロウクン                                                                                                                                                                                                                                                                                                                                                                                |
| `0x8b` | `0x088747` | しまいました                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x8C` | `0x08874E` | マッドサイエンティスト                                                                                                                                                                                                                                                                                                                                                                            |
| `0x8D` | `0x08875A` | 　　　　　　　　　　　　　　　                                                                                                                                                                                                                                                                                                                                                                    |
| `0x8E` | `0x08876A` | オートロック                                                                                                                                                                                                                                                                                                                                                                                      |
| `0x8F` | `0x088771` | いんちょう                                                                                                                                                                                                                                                                                                                                                                                        |
| `0x90` | `0x088777` | ターミナルシステム                                                                                                                                                                                                                                                                                                                                                                                |
| `0x91` | `0x088781` | みすぼらしいおとこ：⏎                                                                                                                                                                                                                                                                                                                                                                             |

## マップ

### 3Dダンジョン

メモリ上の3Dダンジョンデータをマップジェネレータ ([scripts/map-generator.sc](scripts/map-generator.sc)) により画像化したもの。

![3d-map](https://github.com/akiomik/smt1-note/blob/main/map.png?raw=true)
![3d-map-with-annotation](https://github.com/akiomik/smt1-note/blob/main/map-annotated.png?raw=true)

### 3Dダンジョンのデータ

3Dダンジョンのデータはメモリ上の `0x048000` 〜 `0x4BFFF` の範囲。
各マスは壁データ1 byteとイベントデータ1byteの合計2 byteで表現され、以下のようなデータ構造を持っている。

<table>
  <tbody>
    <tr>
      <td colspan="8">byte 0 (壁)</td>
      <td colspan="8">byte 1 (イベント)</td>
    </tr>
    <tr>
      <td colspan="2">北</td>
      <td colspan="2">東</td>
      <td colspan="2">南</td>
      <td colspan="2">西</td>
      <td>暗闇</td>
      <td>宝箱</td>
      <td colspan="2">アクセス不可</td>
      <td colspan="4">イベント</td>
    </tr>
    <tr>
      <td>7</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>3</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>7</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>3</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>

壁データは北・東・南・西と2bitごとに分かれており、値により以下の意味を持つ。

- `00`: なし
- `01`: 壁 (黒線)
- `10`: 隠しドア (灰色破線)
- `11`: ドア (黒破線)

イベントデータは上位4bitがフラグになっており、下位4bitとの組み合わせによってそのマスで発生するイベントを表している。

- `0x00`: なし
- `0x01`: 回転床
- `0x02`: 毒床 (紫)
- `0x03`: ダメージ床 (Law, Neutralのみ対象。赤)
- `0x04`: ダメージ床 (Neutral, Chaosのみ対象。青)
- `0x05`: 落とし穴 (黒丸)
- `0x06`: ワープ
- `0x07`: 出入り口 (赤丸)
- `0x08`: 上り階段
- `0x09`: 下り階段
- `0x0A`: 看板
- `0x0B`: メッセージ
- `0x0C`: エレベータ
- `0x0D`: イベント
- `0x0E`: イベント
- `0x0F`: 不明
- `0x30`: アクセス不可 (黒)
- `0x40`: 宝箱
- `0x80`: 暗闇 (灰色)

## スクリプト

### マップジェネレータ

[Ammonite](https://ammonite.io) が必要。また、 [doodle](https://www.creativescala.org/doodle/) の [未リリースのコミット](https://github.com/creativescala/doodle/commit/efc3371fbaf3277dcd9a90af5d49f94f115c269e) に依存しているため、事前に `publishLocal` しておく必要がある。

以下のコマンドで `map.png` を生成する。

```bash
# Generates map.png
amm scripts/map-generator.sc
```

### 文字デコーダ

[Ammonite](https://ammonite.io) が必要。

16進数でエンコードされた文字コードを受け取ってUTF-8にデコードした文字を出力する。

```bash
# Decodes characters from hex string
amm scripts/char-decoder.sc --str 668AB9707F # => コンゴトモ

# Decodes characters from binary file
amm scripts/char-decoder.sc --file text.bin
```

### 文字エンコーダ

[Ammonite](https://ammonite.io) が必要。

UTF-8の文字列を受け取って、16進数でエンコードされた文字コードを出力する。

```bash
# Encodes characters to hex string
amm scripts/char-encoder.sc --str コンゴトモ # => 668ab9707f
```

## リソース

### 逆アセンブリ

- https://github.com/spannerisms/smt1dasm
